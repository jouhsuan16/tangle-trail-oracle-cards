<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oracle Card + Guidebook</title>

  <style>
    body {
      margin: 0;
      padding: 20px;
      display: flex;
      gap: 40px;
      align-items: flex-start;
      justify-content: center;
      background: #fff;
      font-family: sans-serif;
      box-sizing: border-box;
    }

    /* 兩個容器共同設定 */
    #card-container,
    #book-container {
      width: 400px;
      height: 600px;
      border: 1px solid #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
      box-sizing: border-box;
      background: transparent;
    }

    /* 卡片容器：底部預留空間給 reset（不遮卡片內容） */
    #card-container {
      padding-bottom: 60px; /* 關鍵：預留按鈕區 */
    }

    #card {
      max-width: 100%;
      max-height: 100%;
      cursor: pointer;
      transition: box-shadow 0.3s ease;
      display: block;
    }

    #card:hover {
      box-shadow: 0 0 30px rgba(220, 220, 220, 0.7);
    }

    #book {
      max-width: 100%;
      max-height: 100%;
      display: block;
    }

    /* reset 固定在卡片容器底部中央（不浮在卡片上） */
    #reset-btn {
      background-color: black;
      color: white;
      border: none;
      padding: 6px 12px;
      font-size: 14px;
      border-radius: 4px;
      cursor: pointer;

      position: absolute;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
    }

    /* 手機版：直排 + 放大內容 + 減少留白 */
    @media (max-width: 768px) {
      body {
        padding: 16px;
        flex-direction: column;
        gap: 16px;
        align-items: center;
      }

      #card-container,
      #book-container {
        width: 100%;
        max-width: 360px;
        height: auto;         /* 讓圖片決定高度 */
      }

      /* 手機版依然保留底部空間給 reset */
      #card-container {
        padding-bottom: 56px;
      }

      #card,
      #book {
        width: 100%;
        height: auto;
        max-width: 100%;
        max-height: none;
      }

      #reset-btn {
        bottom: 12px;
        font-size: 14px;
      }
    }
  </style>
</head>

<body>

  <div id="card-container">
    <img id="card" src="card-back.jpg" alt="card" />
    <button id="reset-btn" type="button">reset</button>
  </div>

  <div id="book-container">
    <img id="book" src="guidebook/page-1.jpg" alt="book" />
  </div>

  <script>
    const cardImg = document.getElementById("card");
    const bookImg = document.getElementById("book");
    const resetBtn = document.getElementById("reset-btn");

    const cardToPage = {
      "card-back": 1, "card-01": 6,  "card-02": 12, "card-03": 24, "card-04": 18, "card-05": 30,
      "card-06": 27, "card-07": 25, "card-08": 26, "card-09": 29, "card-10": 28,
      "card-11": 10, "card-12": 9,  "card-13": 8,  "card-14": 11, "card-15": 7,
      "card-16": 22, "card-17": 19, "card-18": 20, "card-19": 23, "card-20": 21,
      "card-21": 16, "card-22": 13, "card-23": 14, "card-24": 17, "card-25": 15,
      "card-26": 34, "card-27": 31, "card-28": 32, "card-29": 35, "card-30": 33
    };

    function drawCard() {
      const num = Math.floor(Math.random() * 30) + 1;
      const id = "card-" + String(num).padStart(2, "0");
      const pageNum = cardToPage[id];

      // 顯示卡片
      cardImg.src = id + ".jpg";

      // 延遲後切換書頁
      setTimeout(() => {
        bookImg.src = "guidebook/page-" + pageNum + ".jpg";
      }, 800);
    }

    document.body.addEventListener("click", (e) => {
      if (e.target.id !== "reset-btn") drawCard();
    });

    resetBtn.addEventListener("click", (e) => {
      e.stopPropagation(); // 避免 reset 點擊又觸發抽卡
      cardImg.src = "card-back.jpg";
      bookImg.src = "guidebook/page-1.jpg";
    });
  </script>

</body>
</html>
